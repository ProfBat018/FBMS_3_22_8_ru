# ADO.NET 

Начнем с того, что ADO.NET это всего лишь набор классов, который позволяет нам связать нашу программу с `SQL`

Важным моментом тут является не сам набор классов, 
так как работу с ними можно просто выучить, а сам драйвер

`ODBC` - Open Database Connectivity - это драйвер, который связывает нашу программу с `SQL`
При этом под капотом он использует средства самого `SQL` для работы с базой данных


Сам по себе `ADO.NET` - это устаревшая технология, которая 
редко используется в современных проектах, но тем не менее,
так как он является более низкоуровневым, то он позволяет
нам лучше понять в будущем как работает `Entity Framework`

Для работы с ним нам нужно подключить `System.Data.SqlClient`



### Проблема disposing в некоторых классах EF Core

На самом деле никакой проблемы с `dispose` нет, просто вам надо понять как работает `mutable` и `immutable` объекты

`mutable` - это объекты, которые можно изменять, а `immutable` - это объекты, которые нельзя изменять

Вот пример `immutable` объекта

```csharp

using SqlConnection connection = new("connection string");
using SqlCommand command = new("Select * from Users", connection);

using var reader = command.ExecuteReader();
```

вот в этом примере мы создаем объекты, которые нельзя изменять, так как они `immutable`

Конечно же, мы можем их изменить, но есть определнные условия...

```csharp

using SqlConnection connection = new("connection string");
using SqlCommand command = new("Select * from Users", connection);

using var reader = command.ExecuteReader();

command = new("Select * from Users where id = 1", connection);

```

Пример, который выше не будет работать, так как мы пытаемся изменить `immutable` объект.

Если мы удалим `using` и просто создадим объекты, то мы сможем их изменить

Все дело в том, что при использовании `using` объекты уничтожаются после того, как мы выйдем из области видимости и соответственно мы не сможем их изменить

Все из-за того, что под капотом `using` вызывает метод `Dispose`, который уничтожает объекты, а если 
мы пытаемся изменить объект, который находится в состоянии `disposed`, то мы получим ошибку

Тут есть несколько причин. 
1. Первая причина в том, что мы не можем изменить объект, который уничтожен
2. Вторая причина в том, что мы не можем изменить объект, который находится в той же области видимости, что и `using`. Так как есть вероятность что он еще используется или будет уничтожен в будущем

